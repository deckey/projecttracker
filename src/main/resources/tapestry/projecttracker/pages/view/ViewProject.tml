<html t:type="layout" xmlns:t="http://tapestry.apache.org/schema/tapestry_5_4.xsd"
      xmlns:p="tapestry:parameter">
    <body>
        <div class="container">
            <t:header/>
            <t:mainmenu/>
            <div class="row border_btm">
                <!-- PROJECT DETAILS HEADER -->
                <t:form class="col-sm-10 form-inline" t:id="projectSelectForm">
                    <label for="projectSelector">
                        Project details:
                    </label>
                    <div class="form-group ">
                        <select t:type="select"
                                t:id="projectSelector" 
                                t:model="projects" 
                                t:value="project"/>
                        <t:submit class="btn btn-default" value="Select"/>
                        <!--LOG PROJECT TIME LINK BUTTON-->
                        <!--VISIBLE TO ASSIGNED MEMBERS ONLY-->
                        <t:if test="checkProjectMember">
                            <a t:type="pagelink" t:page="log/LogProject" context="project.projectId" class="btn btn-warning ">Log Time</a>
                        </t:if>
                    </div>
                </t:form> 
            </div>
            <!--BEAN DISPLAY TABLE-->
            <div class="row well">
                <table class="col-sm-6" id="detailsTable">
                    <tr>
                        <td>Project ID:</td>
                        <td>000-${project.projectId}</td>
                    </tr>
                    <tr>
                        <td>Project title:</td>
                        <td>
                            <b>${project.projectTitle}</b>
                        </td>
                    </tr>
                    <tr>
                        <td>Project description:</td>
                        <td>${project.projectDescription}</td>
                    </tr>
                    <tr>
                        <td>Company:</td>
                        <td>${project.projectClient}</td>
                    </tr>
                    <tr>
                        <td>Category:</td>
                        <td>${project.projectCategory}</td>
                    </tr>
                    <tr>
                        <td>Start date:</td>
                        <td>${startDateFormat}</td>
                    </tr>
                    <tr>
                        <td>Due date:</td>
                        <td>${dueDateFormat}</td>
                    </tr>
                        
                    <tr>
                        <td>Hours logged:</td>
                        <td>${project.projectTime}</td>
                    </tr>
                    <tr>
                        <td>Status:</td>
                        <td>${project.projectStatus}</td>
                    </tr>
                    <tr>
                        <td>Created on:</td>
                        <td>
                            ${creationDateFormat}
                        </td>
                    </tr>
                </table>
               
                <table class="col-sm-3 " id="assignedTable">
                    <th>Assigned member</th>
                    <th>Role</th>
                    <tbody>
                        <tr t:type="loop" t:source="getSortedAssignedMembers()" t:value="member">
                            <td>${member.memberName}</td>
                            <td>${member.memberSpecialty}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
           
            
            <!--ONLY VISIBLE FOR ADMINISTRATORS-->
            <t:if test="loggedInRole">
                <!--EDIT PROJECT LINK BUTTON-->
                <div class="row">
                    <a t:type="pagelink" t:page="edit/EditProject" context="project.projectId" class="btn btn-primary  pull-right ">Edit project</a> 
                </div>
            </t:if>
            <div class="spacer"/>
        </div>
    </body>
</html>